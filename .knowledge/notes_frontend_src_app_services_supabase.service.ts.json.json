{"is_source_file": true, "format": "TypeScript", "description": "This file defines the SupabaseService class for an Angular application, responsible for creating and providing a singleton Supabase client, including dynamic import handling and fallback CDN loading.", "external_files": ["@supabase/supabase-js"], "external_methods": ["import", "console.error", "Promise.then", "Promise.resolve", "globalThis.__supabase_loading__", "document.createElement", "head.appendChild"], "published": ["SupabaseService"], "classes": [{"name": "SupabaseService", "description": "Angular service that provides a singleton instance of the Supabase client, with dynamic module loading and fallback CDN import."}], "methods": [{"name": "get client(): any { client", "description": "Getter that returns a proxy for the Supabase client, initializing it if necessary.", "scope": "SupabaseService", "scopeKind": "class"}, {"name": "private async createClient(): Promise<any> { createClient", "description": "Asynchronous method that creates or retrieves the Supabase client, trying to import the module dynamically, with fallback to CDN.", "scope": "SupabaseService", "scopeKind": "class"}], "calls": ["this.createClient", "import", "console.error", "Promise.then", "Promise.resolve", "document.createElement", "head.appendChild", "create"], "search-terms": ["Angular", "Supabase client singleton", "dynamic import", "fallback CDN", "supabase-js"], "state": 2, "file_id": 23, "knowledge_revision": 128, "git_revision": "b3fa9b77c0341f9f3152683f47a7a87b9a674552", "revision_history": [{"48": ""}, {"113": ""}, {"116": ""}, {"119": "b3fa9b77c0341f9f3152683f47a7a87b9a674552"}, {"124": "b3fa9b77c0341f9f3152683f47a7a87b9a674552"}, {"127": "b3fa9b77c0341f9f3152683f47a7a87b9a674552"}, {"128": "b3fa9b77c0341f9f3152683f47a7a87b9a674552"}], "ctags": [{"_type": "tag", "name": "SupabaseService", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^export class SupabaseService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "_clientPromise", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^  private _clientPromise: Promise<any> | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "SupabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^    const client = create(url, key, {$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^  get client(): any {$/", "language": "TypeScript", "kind": "method", "scope": "SupabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^    const create = mod.createClient || (mod.default && mod.default.createClient);$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "createClient", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^  private async createClient(): Promise<any> {$/", "language": "TypeScript", "kind": "method", "scope": "SupabaseService", "scopeKind": "class"}, {"_type": "tag", "name": "doc", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^              const doc: any = (globalThis as any).document;$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "hasDocument", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^      const hasDocument = typeof (globalThis as any).document !== 'undefined';$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^    const key = (import.meta as any).env?.NG_APP_SUPABASE_ANON_KEY || '';$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "modulePath", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^      const modulePath = ['@supabase', 'supabase-js'].join('\\/'); \\/\\/ prevents static analyzer /", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "script", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^              const script = (doc as any).createElement('script');$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/simple-notes-app-12131-12144/notes_frontend/src/app/services/supabase.service.ts", "pattern": "/^    const url = (import.meta as any).env?.NG_APP_SUPABASE_URL || '';$/", "language": "TypeScript", "kind": "constant", "scope": "SupabaseService.createClient", "scopeKind": "method"}], "hash": "aa2561998cdabf91679f4d33941d7d9c", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/app/services/supabase.service.ts", "fields": [{"name": "private _clientPromise: Promise<any> | null = null;", "scope": "SupabaseService", "scopeKind": "class", "description": "unavailable"}]}